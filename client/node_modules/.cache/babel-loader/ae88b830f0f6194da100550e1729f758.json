{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2400G\\\\Downloads\\\\trps coursework2502\\\\trps coursework\\\\client\\\\src\\\\components\\\\LikeButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { Button, Label, Card, Image, Icon } from 'semantic-ui-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LikeButton(_ref) {\n  _s();\n\n  let {\n    post: {\n      id,\n      likeCount,\n      likes\n    }\n  } = _ref;\n  const [liked, setLiked] = useState(false);\n  useEffect(() => {\n    if (user && likes.find(like => like.username === user.username)) {\n      setLiked(true);\n    } else setLiked(false);\n  }, [user, likes]);\n  const [likePost] = useMutation(LIKE_POST_MUTATION, {\n    variables: {\n      postId: id\n    }\n  });\n  const likeButton = user ? liked ? /*#__PURE__*/_jsxDEV(Button, {\n    color: \"teal\",\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"heart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Button, {\n    color: \"teal\",\n    basic: true,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"heart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Button, {\n    as: Link,\n    to: \"/login\",\n    color: \"teal\",\n    basic: true,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"heart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Button, {\n    as: \"div\",\n    labelPosition: \"right\",\n    onClick: likePost,\n    children: [likeButton, /*#__PURE__*/_jsxDEV(Label, {\n      basic: true,\n      color: \"teal\",\n      pointing: \"left\",\n      children: likeCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LikeButton, \"eSKrU4AP2HgHzTQCB3G+RbjrULM=\", false, function () {\n  return [useMutation];\n});\n\n_c = LikeButton;\nconst LIKE_POST_MUTATION = gql`\n    mutation likePost($postId: ID!){\n        likePost(postId: $postId){\n            id\n            likes {\n                id username\n            }\n            likeCount\n        }\n    } \n`;\nexport default LikeButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"sources":["C:/Users/2400G/Downloads/trps coursework2502/trps coursework/client/src/components/LikeButton.js"],"names":["React","useEffect","useState","Link","useMutation","gql","Button","Label","Card","Image","Icon","LikeButton","post","id","likeCount","likes","liked","setLiked","user","find","like","username","likePost","LIKE_POST_MUTATION","variables","postId","likeButton"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,SAAQC,WAAR,QAA0B,qBAA1B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAAQC,MAAR,EAAeC,KAAf,EAAqBC,IAArB,EAA0BC,KAA1B,EAAgCC,IAAhC,QAA2C,mBAA3C;;;AACA,SAASC,UAAT,OAAkD;AAAA;;AAAA,MAA7B;AAACC,IAAAA,IAAI,EAAC;AAACC,MAAAA,EAAD;AAAIC,MAAAA,SAAJ;AAAcC,MAAAA;AAAd;AAAN,GAA6B;AAC9C,QAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBf,QAAQ,CAAC,KAAD,CAAjC;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACV,QAAIiB,IAAI,IAAIH,KAAK,CAACI,IAAN,CAAWC,IAAI,IAAGA,IAAI,CAACC,QAAL,KAAiBH,IAAI,CAACG,QAAxC,CAAZ,EAA8D;AAC1DJ,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACH,KAFD,MAEOA,QAAQ,CAAC,KAAD,CAAR;AACV,GAJQ,EAIP,CAACC,IAAD,EAAMH,KAAN,CAJO,CAAT;AAMA,QAAM,CAACO,QAAD,IAAalB,WAAW,CAACmB,kBAAD,EAAqB;AAC/CC,IAAAA,SAAS,EAAC;AAACC,MAAAA,MAAM,EAACZ;AAAR;AADqC,GAArB,CAA9B;AAIA,QAAMa,UAAU,GAAGR,IAAI,GACnBF,KAAK,gBACD,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAA,2BACJ,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADI;AAAA;AAAA;AAAA;AAAA,UADC,gBAKD,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,KAAK,MAA1B;AAAA,2BACA,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UANe,gBAWnB,QAAC,MAAD;AAAQ,IAAA,EAAE,EAAEb,IAAZ;AAAiB,IAAA,EAAE,EAAC,QAApB;AAA6B,IAAA,KAAK,EAAC,MAAnC;AAA0C,IAAA,KAAK,MAA/C;AAAA,2BACA,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UAXJ;AAeA,sBACI,QAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,KAAX;AAAiB,IAAA,aAAa,EAAC,OAA/B;AAAuC,IAAA,OAAO,EAAEmB,QAAhD;AAAA,eACCI,UADD,eAEF,QAAC,KAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,KAAK,EAAC,MAApB;AAA2B,MAAA,QAAQ,EAAC,MAApC;AAAA,gBACKZ;AADL;AAAA;AAAA;AAAA;AAAA,YAFE;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAQH;;GApCQH,U;UAScP,W;;;KATdO,U;AAuCT,MAAMY,kBAAkB,GAAGlB,GAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;AAYA,eAAeM,UAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {useMutation} from '@apollo/react-hooks'\r\nimport gql from 'graphql-tag'\r\nimport {Button,Label,Card,Image,Icon} from 'semantic-ui-react'\r\nfunction LikeButton ({post:{id,likeCount,likes}}) {\r\n    const [liked,setLiked] = useState(false);\r\n    \r\n    useEffect(()=>{\r\n        if (user && likes.find(like=> like.username=== user.username)){\r\n            setLiked(true);\r\n        } else setLiked(false)\r\n    },[user,likes])\r\n\r\n    const [likePost] = useMutation(LIKE_POST_MUTATION, {\r\n        variables:{postId:id}\r\n    });\r\n\r\n    const likeButton = user ? (\r\n        liked ? (\r\n            <Button color=\"teal\">\r\n        <Icon name='heart' />\r\n      </Button>\r\n        ) : (\r\n            <Button color=\"teal\" basic>\r\n            <Icon name='heart' />\r\n          </Button> \r\n        )\r\n    ) : (\r\n        <Button as={Link}to=\"/login\" color=\"teal\" basic>\r\n        <Icon name='heart' />\r\n      </Button>\r\n    )\r\n    return (\r\n        <Button as='div' labelPosition='right' onClick={likePost}>\r\n        {likeButton}\r\n      <Label  basic color='teal' pointing='left'>\r\n          {likeCount}\r\n      </Label>\r\n    </Button>\r\n    )\r\n}\r\n\r\n\r\nconst LIKE_POST_MUTATION = gql `\r\n    mutation likePost($postId: ID!){\r\n        likePost(postId: $postId){\r\n            id\r\n            likes {\r\n                id username\r\n            }\r\n            likeCount\r\n        }\r\n    } \r\n`\r\n\r\nexport default LikeButton"]},"metadata":{},"sourceType":"module"}